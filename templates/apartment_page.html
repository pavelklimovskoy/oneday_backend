{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
    <link rel="stylesheet" href="{% static 'styles/nice-select2.css' %}">
    <link rel="stylesheet" href="{% static 'styles/bootstrap/bootstrap.min.css' %}">
    <link rel="stylesheet" href="{% static 'styles/normalize.css' %}">
    <link rel="stylesheet" href="{% static 'styles/apartment_page_main_style.css' %}">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Бронирование квартиры по адресу {{ apartment.address }}</title>
</head>
{% include 'common/header.html' %}
<body class="body">
<section class="main">
    <div class="main__list">
        <div class="navigation">
        </div>

        <div class="main__content" id="info">
            <div class="apart__info">
                <div class="apart__header">
                    <div class="apart__header__name">
                        <span class="apart__header__name__icon"></span>
                        <span class="apart__header__name__text header__2">
                                {{ apartment.address }}
                            </span>
                    </div>
                    <div class="apart__header__btns">
                        <button class="button apart__header__btns__book button__primary" id="button__book">
                            Забронировать
                        </button>

                        <button class="button button__icon secondary apart__header__btns__share">
                            <img width="24px" src="{% static 'img/heart_primary.png' %}"/>
                        </button>

                        <button class="button button__icon secondary apart__header__btns__share">
                            <img width="24px" src="{% static 'icons/share-fill.png' %}"/>
                        </button>

                    </div>
                </div>

                <div class="apart__pictures">
                    <div class="apart__pictures__big">
                        <div id="carouselExampleIndicators1" class="carousel slide"
                             data-bs-touch="true" data-bs-interval="false"
                             data-bs-wrap="false"
                        >
                            <div class="carousel-indicators">
                                {% for photo in apartment.photos.all %}
                                    {% if forloop.first %}
                                        <button type="button"
                                                data-bs-target="#carouselExampleIndicator{{ forloop.counter }}"
                                                data-bs-slide-to="{{ forloop.counter0 }}" class="slide-button active"
                                                aria-current="true"
                                                aria-label="Slide {{ forloop.counter }}"></button>
                                    {% else %}
                                        <button type="button"
                                                data-bs-target="#carouselExampleIndicators{{ forloop.counter0 }}"
                                                data-bs-slide-to="{{ forloop.counter0 }}" class="slide-button"
                                                aria-label="Slide {{ forloop.counter }}"></button>
                                    {% endif %}
                                {% endfor %}
                            </div>
                            <div class="carousel-inner">
                                {% for photo in apartment.photos.all %}
                                    {% if forloop.first %}
                                        <div class="carousel-item active">
                                            <img src="{{ photo.photo_url }}"
                                                 class="d-block w-100 img-car"
                                                 alt="...">
                                        </div>
                                    {% else %}
                                        <div class="carousel-item">
                                            <img src="{{ photo.photo_url }}"
                                                 class="d-block w-100 img-car"
                                                 alt="...">
                                        </div>
                                    {% endif %}
                                {% endfor %}
                            </div>
                            <button class="carousel-control-prev" type="button"
                                    data-bs-target="#carouselExampleIndicators1" data-bs-slide="prev">
                                <span class="carousel-control-prev-icon-new" aria-hidden="true"></span>
                                <span class="visually-hidden">Previous</span>
                            </button>
                            <button class="carousel-control-next" type="button"
                                    data-bs-target="#carouselExampleIndicators1" data-bs-slide="next">
                                <span class="carousel-control-next-icon-new" aria-hidden="true"></span>
                                <span class="visually-hidden">Next</span>
                            </button>
                        </div>
                    </div>

                    <div class="apart__pictures__small">
                        <div class="miniatures">
                            {% for photo in apartment.photos.all %}
                                <img src="{{ photo.photo_url }}" class="miniature"
                                     data-slide-to="{{ forloop.counter0 }}"
                                     alt="...">
                            {% endfor %}
                        </div>
                    </div>
                </div>

                <div class="apart__short__info main__block__element">
                    <span class="subtitle__1">Краткая информация</span>
                    <div class="apart__short__info__tips">
                        <div class="apart__short__info__tip">
                            <img src="{% static 'icons/room.svg' %}" alt="...">
                            <span class="title__medium">Комнат: 2</span>
                        </div>
                        <div class="apart__short__info__tip">
                            <img src="{% static 'icons/bed.svg' %}" alt="...">
                            <span class="title__medium">Спальных мест: 2+2</span>
                        </div>
                        <div class="apart__short__info__tip">
                            <img src="{% static 'icons/floor.svg' %}" alt="...">
                            <span class="title__medium">Этаж: 26</span>
                        </div>
                        <div class="apart__short__info__tip">
                            <img src="{% static 'icons/ruler.svg' %}" alt="...">
                            <span class="title__medium">Площадь: 84м²</span>
                        </div>
                    </div>
                    <div class="apart__short__info__cards">
                        <div class="apart__short__info__card">
                                    <span class="apart__short__info__card__img">
                                        <img src="{% static 'icons/bed.svg' %}" alt="...">
                                    </span>
                            <div class="apart__short__info__card__text">
                                <span class="title__medium">Кровать</span>
                                <span class="title__light">Двуспальная</span>
                            </div>
                        </div>
                        <div class="apart__short__info__card">
                                    <span class="apart__short__info__card__img">
                                        <img src="{% static 'icons/bed.svg' %}" alt="...">
                                    </span>
                            <div class="apart__short__info__card__text">
                                <span class="title__medium">Кровать</span>
                                <span class="title__light">Односпальная</span>
                            </div>
                        </div>
                        <div class="apart__short__info__card">
                                    <span class="apart__short__info__card__img">
                                        <img src="{% static 'icons/sofa.svg' %}" alt="...">
                                    </span>
                            <div class="apart__short__info__card__text">
                                <span class="title__medium">Диван</span>
                                <span class="title__light">Односпальный</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="apart__comforts main__block__element">
                    <span class="subtitle__1">Удобства в квартире</span>
                    <div class="apart__comforts__cards">
                        <div class="apart__comforts__card">
                            <img src="{% static 'icons/Wi-Fi.svg' %}" alt="...">
                            <span class="title__medium">Интернет Wi-Fi</span>
                        </div>
                        <div class="apart__comforts__card">
                            <img src="{% static 'icons/Condicioner.svg' %}" alt="...">
                            <span class="title__medium">Кондиционер</span>
                        </div>
                        <div class="apart__comforts__card">
                            <img src="{% static 'icons/child.svg' %}" alt="...">
                            <span class="title__medium">Можно с детьми</span>
                        </div>
                        <div class="apart__comforts__card">
                            <img src="{% static 'icons/Wi-Fi.svg' %}" alt="...">
                            <span class="title__medium">Интернет Wi-Fi</span>
                        </div>
                        <div class="apart__comforts__card">
                            <img src="{% static 'icons/Wi-Fi.svg' %}" alt="...">
                            <span class="title__medium">Интернет Wi-Fi</span>
                        </div>
                        <div class="apart__comforts__card">
                            <img src="{% static 'icons/Wi-Fi.svg' %}" alt="...">
                            <span class="title__medium">Интернет Wi-Fi</span>
                        </div>
                    </div>
                </div>

                <div class="apart__rules main__block__element">
                    <span class="subtitle__1">Правила заселения</span>
                    <div class="apart__rules__text">
                        <div class="apart__rules__text__rule">
                                    <span class="apart__rules__text__rule__number title__medium">
                                        1
                                    </span>
                            <span class="apart__rules__text__rule__text title__medium">
                                        Размещение круглосуточно
                                    </span>
                        </div>
                        <div class="apart__rules__text__rule">
                                    <span class="apart__rules__text__rule__number title__medium">
                                        2
                                    </span>
                            <span class="apart__rules__text__rule__text title__medium">
                                        Заезд после 14:00, выезд до 12:00
                                    </span>
                        </div>
                        <div class="apart__rules__text__rule secondary">
                                    <span class="apart__rules__text__rule__line">
                                    </span>
                            <span class="apart__rules__text__rule__number text__medium">
                                        2.1
                                    </span>
                            <span class="apart__rules__text__rule__text text__medium">
                                        В дни футбола и праздничные дни календаря заезд с 15:00, выезд до 12:00
                                   </span>
                        </div>
                        <div class="apart__rules__text__rule">
                                    <span class="apart__rules__text__rule__number text__medium">
                                        3
                                    </span>
                            <span class="apart__rules__text__rule__text text__medium">
                                        Ранний заезд и поздний выезд по согласованию
                                   </span>
                        </div>
                        <div class="apart__rules__text__rule">
                                    <span class="apart__rules__text__rule__number text__medium">
                                        4
                                    </span>
                            <span class="apart__rules__text__rule__text text__medium">
                                        Гости которые заезжают после 18:00 оплачивают бронь 100% и заезд дистанционно
                                   </span>
                        </div>
                        <div class="apart__rules__text__rule">
                                    <span class="apart__rules__text__rule__number text__medium">
                                        5
                                    </span>
                            <span class="apart__rules__text__rule__text text__medium">
                                        В другое время гость получает ключи через кейс-бокс и заселяется бесконтактно
                                   </span>
                        </div>
                        <div class="apart__rules__text__rule">
                                    <span class="apart__rules__text__rule__number text__medium">
                                        6
                                    </span>
                            <span class="apart__rules__text__rule__text text__medium">
                                        Залог за сохранность имущества — 2 000 ₽. Возвращается в день выезда после проверки и уборки квартиры, переводом на карту
                                   </span>
                        </div>
                        <div class="apart__rules__text__rule secondary">
                                    <span class="apart__rules__text__rule__line">
                                    </span>
                            <span class="apart__rules__text__rule__number text__medium">
                                        6.1
                                    </span>
                            <span class="apart__rules__text__rule__text text__medium">
                                        В праздничные и государственные дни возможен залог свыше 2 000 ₽
                                   </span>
                        </div>
                    </div>
                </div>

                <div class="apart__restrictions main__block__element">
                            <span class="subtitle__1">
                                Ограничения
                            </span>
                    <div class="apart__restrictions__text">
                        <div class="apart__restriction">
                            <img src="{% static 'icons/error.svg' %}" alt="">
                            <span class="text__medium">
                                        Не принимаем крупных питомцев
                                    </span>
                        </div>
                        <div class="apart__restriction">
                            <img src="{% static 'icons/error.svg' %}" alt="">
                            <span class="text__medium">
                                        Не работаем с людьми в нетрезвом состоянии
                                    </span>
                        </div>
                        <div class="apart__restriction">
                            <img src="{% static 'icons/error.svg' %} " alt="">
                            <span class="text__medium">
                                        Не сдаём лицам до 22 лет под вечеринки и мероприятия                         
                                    </span>
                        </div>
                    </div>
                </div>

                <div class="aparts__places main__block__element">
                            <span class="subtitle__1">
                                Места поблизости
                            </span>

                    <div class="aparts__places__nearby">
                        <div class="aparts__places__header">
                            <img src="{% static 'icons/nearby.svg' %}" alt="">
                            <span class="aparts__places__header__text">
                                        Рядом с домом
                                    </span>
                        </div>
                        <ul class="aparts__places__grid">
                            <li class="aparts__places__grid__item text__medium">
                                Зона с мангалом и беседкой для барбекю за домом
                            </li>
                            <li class="aparts__places__grid__item text__medium">
                                Краевая Клиническая Больница
                            </li>
                            <li class="aparts__places__grid__item text__medium">
                                Центр грудной хирургии
                            </li>
                            <li class="aparts__places__grid__item text__medium">
                                Магазин «Магнит»
                            </li>
                        </ul>
                    </div>

                    <div class="aparts__places__landmark">
                        <div class="aparts__places__header">
                            <img src="{% static 'icons/landmark.svg' %}" alt="">
                            <span class="aparts__places__header__text">
                                        Места отдыха
                                    </span>
                        </div>
                        <ul class="aparts__places__grid">
                            <li class="aparts__places__grid__item text__medium">
                                Зона с мангалом и беседкой для барбекю за домом
                            </li>
                            <li class="aparts__places__grid__item text__medium">
                                Краевая Клиническая Больница
                            </li>
                            <li class="aparts__places__grid__item text__medium">
                                Центр грудной хирургии
                            </li>
                            <li class="aparts__places__grid__item text__medium">
                                Магазин «Магнит»
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="apart__button__up">
                    <button class="button button__text secondary" id="button__up">Наверх</button>
                </div>

            </div>

            <div class="booking__form" id="booking">
                <div class="form__header">Бронирование</div>
                <div class="form__date__info">
                    <div class="form__checkin">
                        <div class="form__date">
                                <span class="title__light">
                                    Заезд
                                </span>
                            <span class="title__medium">
                                    Выберите дату
                                </span>
                        </div>
                        <div class="form__time">
                            <select class="selectize">
                                <option data-display="Select">8:00</option>
                                <option value="1">8:30</option>
                                <option value="2">9:00</option>
                                <option value="3">9:30</option>
                                <option value="4">10:30</option>
                                <option value="5">11:00</option>
                                <option value="6">11:30</option>
                                <option value="7" disabled>12:00</option>
                            </select>
                        </div>
                    </div>
                    <span class="form__arrow">
                            <img src="{% static 'icons/arrow-right.svg' %}"/>
                        </span>
                    <div class="form__departure">
                        <div class="form__date">
                                <span class="title__light">
                                    Выезд
                                </span>
                            <span class="title__medium">
                                    Выберите дату
                                </span>
                        </div>
                        <div class="form__time">
                            <select class="selectize">
                                <option data-display="Select">8:00</option>
                                <option value="1">8:30</option>
                                <option value="2">9:00</option>
                                <option value="3">9:30</option>
                                <option value="4">10:30</option>
                                <option value="5">11:00</option>
                                <option value="6">11:30</option>
                                <option value="7" disabled>12:00</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="form__personal__data">
                        <span class="form__personal__data__header header__2">
                            Введите свои данные
                        </span>

                    <div class="form__personal__data__contacts">
                        <div class="form__personal__data__contacts__name">
                                <span class="form__personal__data__contacts__title">
                                    Имя
                                </span>
                            <input
                                    placeholder='Сергей'
                                    class="form__personal__data__contacts__name__input">
                        </div>

                        <div class="form__personal__data__contacts__phone">
                                <span class="form__personal__data__contacts__title">
                                    Телефон
                                </span>
                            <input
                                    placeholder='+7'
                                    class="form__personal__data__contacts__phone__input">
                        </div>
                    </div>

                    <div class="form__personal__data__email">
                            <span class="form__personal__data__email__header title__medium">
                                Электронная почта
                            </span>
                        <input
                                placeholder='name@gmail.com' class="form__personal__data__email__input">
                    </div>
                </div>

                <div class="form__details">
                        <span class="form__details__header header__2">
                            Укажите детали
                        </span>

                    <div class="form__details__guests">
                        <div class="form__details__guests__text">
                                <span class="form__details__guests__title title__medium">
                                    Гости
                                </span>
                            <span class="form__details__guests__subtitle title__light">
                                    До 4-х человек
                                </span>
                        </div>
                        <div class="form__details__guests__counter">
                            <button class="form__details__counter__button minus">
                                -
                            </button>
                            <span class="form__details__counter__value">
                                    0
                                </span>
                            <button class="form__details__counter__button plus">
                                +
                            </button>
                        </div>
                    </div>

                    <div class="form__details__kids">
                        <div class="form__details__kids__text">
                                <span class="form__details__kids__title title__medium">
                                    Дети
                                </span>
                            <span class="form__details__kids__subtitle title__light">
                                    До 1 года
                                </span>
                        </div>
                        <div class="form__details__kids__counter">
                            <button class="form__details__counter__button minus">
                                -
                            </button>
                            <span class="form__details__counter__value">
                                    0
                                </span>
                            <button class="form__details__counter__button plus">
                                +
                            </button>
                        </div>
                    </div>

                    <div class="form__details__pets">
                        <div class="form__details__pets__text">
                                <span class="form__details__pets__title title__medium">
                                    Питомцы
                                </span>
                            <span class="form__details__pets__subtitle title__light">
                                    Только собаки, за доп.плату
                                </span>
                        </div>
                        <div class="form__details__pets__slider">
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" role="switch"
                                       id="flexSwitchCheckDefault">
                            </div>
                        </div>
                    </div>

                    <div class="form__details__additional">
                            <span class="form__details__additional__header header__2">
                                Дополнительная информация
                            </span>
                    </div>
                    <div class="form__details__additional__select">
                            <span class="form__details__additional__select_title title__medium">
                                Откуда узнали о нас?
                            </span>
                        <div class="form__details__additional__select_wrap">
                            <select id="selectize-placeholder">
                                <option value="1">Интернет</option>
                                <option value="2">Соцсети</option>
                            </select>
                        </div>
                    </div>

                    <div class="form__details__additional__input">
                            <span class="form__details__additional__input_title title__medium">
                                Ваши пожелания
                            </span>
                        <input class="form__details__additional__input_textarea"
                               placeholder='Оставьте свои пожелания'></input>
                    </div>

                    <div class="form__details__additional__promo">
                            <span class="form__details__additional__promo_title title__medium">
                                Промокод
                            </span>
                        <input class="form__details__additional__promo_input" placeholder='Введите промокод'></input>
                    </div>
                </div>

                <div class="form__payment">
                    <div class="form__payment__details">
                        <div class="form__payment__details__block">
                                <span class="form__payment__details__text title__light">
                                    Предоплата
                                </span>
                            <span class="form__payment__details__value title__medium number__small">
                                    450 ₽
                                </span>
                        </div>
                        <div class="form__payment__details__block">
                                <span class="form__payment__details__text title__light">
                                    Гости
                                </span>
                            <span class="form__payment__details__value title__medium number__small">
                                    400 ₽
                                </span>
                        </div>
                        <div class="form__payment__details__block">
                                <span class="form__payment__details__text title__light">
                                    Скидка
                                </span>
                            <span class="form__payment__details__value title__medium number__small">
                                    -100 ₽
                                </span>
                        </div>
                        <div class="form__payment__details__block">
                                <span class="form__payment__details__text header__2 color__primary">
                                    Итого:
                                </span>
                            <span class="form__payment__details__value title__medium number__large">
                                    4500 ₽
                                </span>
                        </div>
                    </div>

                    <button class="button form__payment__button button__primary" type="submit">
                        Забронировать
                    </button>

                    <span class="form__payment__text title__light">
                            Чтобы забронировать объект, нужно внести предоплату <span class='form__payment__text__bold'>450 ₽.</span> Оставшуюся сумму вы оплатите при заселении.
                        </span>
                </div>

                <div class="form__checkbox">
                    <label class="input__checkbox__container">
                        <span class="input__checkbox__text title__light">Я согласен(-а) с условиями  <a href=""
                                                                                                        class="input__checkbox__link">пользовательского соглашения</a> и <a
                                href="" class="input__checkbox__link">оферты</a></span>
                        <input type="checkbox" class="input__checkbox" checked="checked">
                        <span class="checkmark"></span>
                    </label>
                </div>


            </div>
        </div>
    </div>
</section>
</body>
{% include 'common/footer.html' %}


<!-- SIDE MENU -->
<script>
    function openNav() {
        let width = document.body.offsetWidth;
        console.log(width)
        let navWidth = "30%";
        if (width < 480) navWidth = "100%";
        else if (width < 780) navWidth = "50%";
        document.getElementById("mySidenavText").style.transition = 'opacity 0.5s 0.5s ease-out';
        document.getElementById("mySidenavText").style.opacity = '1';
        setTimeout(document.getElementById("mySidenav").style.width = navWidth, 0);
        setTimeout(document.getElementById("mySidenavTop").style.width = navWidth, 0);
        setTimeout(document.getElementById("mySidenavBody").style.width = navWidth, 0);
        setTimeout(document.getElementById("mySidenavBody").style.display = 'flex', 0);
    }

    function closeNav() {
        document.getElementById("mySidenavText").style.transition = 'none';
        document.getElementById("mySidenavText").style.opacity = '0';
        setTimeout(document.getElementById("mySidenav").style.width = "0", 0);
        setTimeout(document.getElementById("mySidenavTop").style.width = "0", 0);
        setTimeout(document.getElementById("mySidenavBody").style.width = "0", 0);
        setTimeout(document.getElementById("mySidenavBody").style.display = 'none', 0);
    }
</script>

<!-- nice-select -->
<script src="{% static 'scripts/nice-select2.js' %}">
</script>

<script>
    document.addEventListener("DOMContentLoaded", function (e) {

        // default
        var els = document.querySelectorAll(".selectize");
        els.forEach(function (select) {
            NiceSelect.bind(select);
        });

        var options = {
            placeholder: 'Выберите вариант'
        };

        NiceSelect.bind(document.getElementById("selectize-placeholder"), options);
    });
</script>

<!-- BOOTSTRAP -->
<script src="{% static 'scripts/bootstrap/bootstrap.min.js' %}"></script>

<script>
    const carousel = new bootstrap.Carousel('#carouselExampleIndicators1');

    function updateActiveThumbnail(index) {
        document.querySelectorAll('.miniature').forEach((miniature, i) => {
            if (i === index) {
                miniature.classList.add('active');
                miniature.scrollIntoView({
                    behavior: 'smooth',
                    block: 'nearest',
                    inline: 'center'
                });
            } else {
                miniature.classList.remove('active');
            }
        });
    }

    document.querySelectorAll('.miniature').forEach((miniature) => {
        miniature.addEventListener('click', function () {
            const slideIndex = parseInt(this.getAttribute('data-slide-to'), 10);
            carousel.to(slideIndex);
        });
    });

    document.querySelector('#carouselExampleIndicators1').addEventListener('slide.bs.carousel', function (e) {
        updateActiveThumbnail(e.to);
    });

    updateActiveThumbnail(0);
</script>

<script>
    document.getElementById('button__book').addEventListener('click', function () {
        const targetElement = document.getElementById('booking');
        const elementPosition = targetElement.getBoundingClientRect().top - window.pageYOffset;
        const offset = 90;

        window.scrollTo({
            top: elementPosition - offset,
            behavior: 'smooth'
        });
    });
</script>

<script>
    document.getElementById('button__up').addEventListener('click', function () {
        window.scrollTo({
            top: 0,
            behavior: 'smooth'
        });
    });
</script>
</html>